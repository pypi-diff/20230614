# Comparing `tmp/limes_x-1.1.6-py3-none-any.whl.zip` & `tmp/limes_x-1.1.7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 41014 bytes, number of entries: 26
+Zip file size: 41040 bytes, number of entries: 26
 -rw-rw-r--  2.0 unx      243 b- defN 23-Jun-05 18:20 limes_x/__init__.py
 -rw-rw-r--  2.0 unx       61 b- defN 23-May-05 17:54 limes_x/__main__.py
 -rw-rw-r--  2.0 unx     2971 b- defN 23-May-17 22:28 limes_x/cli.py
 -rw-rw-r--  2.0 unx     2864 b- defN 23-Apr-19 01:42 limes_x/telemetry.py
--rw-rw-r--  2.0 unx        5 b- defN 23-Jun-05 20:26 limes_x/version.txt
--rw-rw-r--  2.0 unx    38989 b- defN 23-Jun-05 20:26 limes_x/workflow.py
+-rw-rw-r--  2.0 unx        5 b- defN 23-Jun-14 21:53 limes_x/version.txt
+-rw-rw-r--  2.0 unx    39022 b- defN 23-Jun-14 16:46 limes_x/workflow.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-19 01:42 limes_x/common/__init__.py
 -rw-rw-r--  2.0 unx     8220 b- defN 23-May-17 22:28 limes_x/common/utils.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-19 01:42 limes_x/environments/__init__.py
 -rw-rw-r--  2.0 unx     1202 b- defN 23-Apr-19 01:42 limes_x/environments/_setup.py
--rw-rw-r--  2.0 unx     6151 b- defN 23-May-01 01:12 limes_x/environments/hpc.py
+-rw-rw-r--  2.0 unx     6159 b- defN 23-Jun-05 21:29 limes_x/environments/hpc.py
 -rw-rw-r--  2.0 unx     3674 b- defN 23-May-17 22:28 limes_x/environments/local.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-19 01:42 limes_x/execution/__init__.py
 -rw-rw-r--  2.0 unx     2814 b- defN 23-Apr-19 01:42 limes_x/execution/comms.py
 -rw-rw-r--  2.0 unx     9432 b- defN 23-May-17 22:28 limes_x/execution/executors.py
 -rw-rw-r--  2.0 unx     5105 b- defN 23-Apr-19 01:42 limes_x/execution/instances.py
--rw-rw-r--  2.0 unx    13994 b- defN 23-May-17 22:28 limes_x/execution/modules.py
+-rw-rw-r--  2.0 unx    14018 b- defN 23-Jun-08 02:15 limes_x/execution/modules.py
 -rw-rw-r--  2.0 unx     4419 b- defN 23-Apr-19 01:42 limes_x/execution/solver.py
 -rw-rw-r--  2.0 unx      677 b- defN 23-Apr-19 01:42 limes_x/execution/template_module_definition.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-May-17 22:28 limes_x/presets/__init__.py
--rw-rw-r--  2.0 unx     9136 b- defN 23-May-17 22:28 limes_x/presets/slurm.py
--rw-rw-r--  2.0 unx     9991 b- defN 23-Jun-05 20:28 limes_x-1.1.6.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Jun-05 20:28 limes_x-1.1.6.dist-info/WHEEL
--rw-rw-r--  2.0 unx       36 b- defN 23-Jun-05 20:28 limes_x-1.1.6.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        8 b- defN 23-Jun-05 20:28 limes_x-1.1.6.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2117 b- defN 23-Jun-05 20:28 limes_x-1.1.6.dist-info/RECORD
-26 files, 122201 bytes uncompressed, 37590 bytes compressed:  69.2%
+-rw-rw-r--  2.0 unx     9137 b- defN 23-Jun-13 23:36 limes_x/presets/slurm.py
+-rw-rw-r--  2.0 unx     9991 b- defN 23-Jun-14 21:53 limes_x-1.1.7.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jun-14 21:53 limes_x-1.1.7.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       36 b- defN 23-Jun-14 21:53 limes_x-1.1.7.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        8 b- defN 23-Jun-14 21:53 limes_x-1.1.7.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2117 b- defN 23-Jun-14 21:53 limes_x-1.1.7.dist-info/RECORD
+26 files, 122267 bytes uncompressed, 37616 bytes compressed:  69.2%
```

## zipnote {}

```diff
@@ -57,23 +57,23 @@
 
 Filename: limes_x/presets/__init__.py
 Comment: 
 
 Filename: limes_x/presets/slurm.py
 Comment: 
 
-Filename: limes_x-1.1.6.dist-info/METADATA
+Filename: limes_x-1.1.7.dist-info/METADATA
 Comment: 
 
-Filename: limes_x-1.1.6.dist-info/WHEEL
+Filename: limes_x-1.1.7.dist-info/WHEEL
 Comment: 
 
-Filename: limes_x-1.1.6.dist-info/entry_points.txt
+Filename: limes_x-1.1.7.dist-info/entry_points.txt
 Comment: 
 
-Filename: limes_x-1.1.6.dist-info/top_level.txt
+Filename: limes_x-1.1.7.dist-info/top_level.txt
 Comment: 
 
-Filename: limes_x-1.1.6.dist-info/RECORD
+Filename: limes_x-1.1.7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## limes_x/version.txt

```diff
@@ -1 +1 @@
-1.1.6
+1.1.7
```

## limes_x/workflow.py

```diff
@@ -706,17 +706,17 @@
         if not self._reference_folder.exists():
             os.makedirs(self._reference_folder)
         else:
             assert os.path.isdir(self._reference_folder), f"reference folder path exists, but is not a folder: {self._reference_folder}"
         self._solver = DependencySolver([c.GetTransform() for c in compute_modules])
         self._all_modules = compute_modules
 
-    def Setup(self, install_type: str):
+    def Setup(self, install_type: str, threads: int=1):
         for step in self._compute_modules:
-            step.Setup(self._reference_folder, install_type)
+            step.Setup(self._reference_folder, install_type, threads=threads)
 
     def _calculate(self, given: Iterable[Item], targets: Iterable[Item]):
         given_k = {x.key for x in given}
         targets_k = {x.key for x in targets} 
         steps, dep_map = self._solver.Solve(given_k, targets_k)
         return steps, dep_map
```

## limes_x/environments/hpc.py

```diff
@@ -93,16 +93,16 @@
 
     # get requirements
     requirements = [str(CONTEXT.params.reference_folder.joinpath(req)) for req in THIS_MODULE.requirements]
     req_ok = True
     for req_path in requirements:
         found = False
         for cmd, req in [
-            # (f"cd {HPC_REF} && pigz -dc {req_path}.tar.gz | tar -", f"{req_path}.tar.gz"),
-            (f"cd {HPC_REF} && pigz -dc {req_path}.lx.tgz | tar -", f"{req_path}.lx.tgz"),
+            # (f"cd {HPC_REF} && pigz -dc {req_path}.tar.gz | tar -xf -", f"{req_path}.tar.gz"),
+            (f"cd {HPC_REF} && pigz -dc {req_path}.lx.tgz | tar -xf -", f"{req_path}.lx.tgz"),
             (f"cp -r {req_path} {HPC_REF}", req_path),
         ]:
             if not os.path.exists(req): continue
             found = True
             _shell(f"""\
                 echo "---- getting requirement: {req}"
                 {cmd}
```

## limes_x/execution/modules.py

```diff
@@ -219,20 +219,20 @@
         self._procedure = procedure
         self.location = Path(location).absolute()
         self.output_mask: set[Item] = set()
         self.threads = threads
         self.memory_gb = memory_gb
         self.requirements = requirements
 
-    def Setup(self, reference_folder: Path, install_type: str):
+    def Setup(self, reference_folder: Path, install_type: str, threads: int=1):
         snakefile = f"{self.location}/setup/setup.smk"
         print(f'setup {self.name} {">"*(50-len(self.name))}')
         if os.path.exists(snakefile):
             LiveShell(f"""\
-                snakemake --cores 1 --snakefile {snakefile} --directory {reference_folder} {install_type}
+                snakemake --cores {threads} --snakefile {snakefile} --directory {reference_folder} {install_type}
             """.replace('  ', ''), echo_cmd=False)
         else:
             print("no setup defined")
         print()
 
     def Grouped(self, item: Item):
         return self._group_by.get(item)
```

## limes_x/presets/slurm.py

```diff
@@ -240,13 +240,13 @@
     cmd = f"""\
     sbatch --account={allocation} \
         --job-name="{run_name}" \
         --nodes=1 --ntasks=1 --error slurm.err --output slurm.out \
         --cpus-per-task=1 --mem=4G --time={time} \
         --wrap="python {SCRIPT} {_INNER} {run_folder}" >> {out_log}
     """.replace("  ", "")
-    with open(out_log, "w") as log:
+    with open(out_log, "r+") as log:
         log.write(cmd+"\n")
     os.system(cmd)
     with open(out_log, "r+") as log:
         for l in log:
             print(l, end="")
```

## Comparing `limes_x-1.1.6.dist-info/METADATA` & `limes_x-1.1.7.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: limes-x
-Version: 1.1.6
+Version: 1.1.7
 Summary: declarative workflow automation
 Home-page: https://github.com/hallamlab/limes-x
 Author: Tony Liu
 Author-email: contacttonyliu@gmail.com
 Project-URL: Bug Tracker, https://github.com/hallamlab/limes-x/issues
 Classifier: Programming Language :: Python :: 3
 Classifier: Operating System :: OS Independent
```

## Comparing `limes_x-1.1.6.dist-info/RECORD` & `limes_x-1.1.7.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 limes_x/__init__.py,sha256=_AEbnQ0P9TPziUyt0ooift9JLVKTTfUuoCXfid4ahbI,243
 limes_x/__main__.py,sha256=MSmt_5Xg84uHqzTN38JwgseJK8rsJn_11A8WD99VtEo,61
 limes_x/cli.py,sha256=KrJcVtXns9ocv7L29kZdmXdAknG8e0xhPMJix2cISuY,2971
 limes_x/telemetry.py,sha256=6hUE1nxxKkPUGUNq0KlIbHQqa3pSqA0zZSjb57Wyngc,2864
-limes_x/version.txt,sha256=BNiWbHqtYm5lfiKfQRzKXTL2nBrnbwbpNUKsa17xLUc,5
-limes_x/workflow.py,sha256=4v1Di3SbY8tA5jsBZsG8lQ6pk6jNoHnJJYdFLYE89qQ,38989
+limes_x/version.txt,sha256=oVwnm-46VH23R6J-MCGZJj45b-RL5hZlJ81KPzSTOMs,5
+limes_x/workflow.py,sha256=3WwZaU0GtU88t4zwlS18SGUXkOx0V5y0Qt2_KM4jtiE,39022
 limes_x/common/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 limes_x/common/utils.py,sha256=uYfnd6FfpAhl_i4bDZENksLlxW9Xec1-iZefHty2L9g,8220
 limes_x/environments/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 limes_x/environments/_setup.py,sha256=rI9gTVt2VMXfeAsuxkTx3ucBp5kd_K-Z6xbJqybzEvg,1202
-limes_x/environments/hpc.py,sha256=vNbqopLFFrk8AXfKeLgPNlgRPEl-fQMxFNLi-sJBR44,6151
+limes_x/environments/hpc.py,sha256=cGgI7zhHrT96USe7N0j5UgUHxKuOKeR9kzzKt3L_DCY,6159
 limes_x/environments/local.py,sha256=gClebFNDbaAc00XLAA7JoxJ_96Idba8vxPJd2F42HXg,3674
 limes_x/execution/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 limes_x/execution/comms.py,sha256=Yx_cIyvzuA7h_iKU4R3fyd1LvsKZzZx-NsVZh_MXHE4,2814
 limes_x/execution/executors.py,sha256=s7bIG5CfPbJyMZkIwmfkPwJPIJq95Rrok01eJDyCf6M,9432
 limes_x/execution/instances.py,sha256=lT32W3nNSOrfovSNEl7ARY8Yt4SkhkA-1NjWUhBvOds,5105
-limes_x/execution/modules.py,sha256=QJH2218a8MovCoiQupwvLN2lOA7gHQAcZ91W-aaZnz4,13994
+limes_x/execution/modules.py,sha256=Bz6sZApYenzBvY980Z6bZfj5VFEdHowcCmW5Q1xFhm4,14018
 limes_x/execution/solver.py,sha256=y9XNSlZscAHxizN57PZTMphHw1PVWjFnEfHyrGN7SFU,4419
 limes_x/execution/template_module_definition.py,sha256=RxW4KsU1-iEScq_Y5GIafSfeXnQQeYGYr9FC9AZ8-VQ,677
 limes_x/presets/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-limes_x/presets/slurm.py,sha256=q2lh3Q7oiFhLFXkLfTtCOh5oI1u0jf6FgQbj4PBOtLo,9136
-limes_x-1.1.6.dist-info/METADATA,sha256=Q13Ae53MDYUAzXSOwv5NFLfD1RfMM4o1mhqqkv976EM,9991
-limes_x-1.1.6.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-limes_x-1.1.6.dist-info/entry_points.txt,sha256=P1UpWZ-q8GvFystMaHOUTH8844VaNMAOs1MX_R_KJXE,36
-limes_x-1.1.6.dist-info/top_level.txt,sha256=r9RGajCrNNSpim7JI2bx3UHGzgXw2vRLTNuxMRwPRNQ,8
-limes_x-1.1.6.dist-info/RECORD,,
+limes_x/presets/slurm.py,sha256=Gy5ePIZ2ohM-vVxWdAUckJ-7LePUNCUmBqOO3KwrBbQ,9137
+limes_x-1.1.7.dist-info/METADATA,sha256=x3sEYVIF3LZ3JHyIqNhwFh24J5ARajbpJJKA7DR8uR0,9991
+limes_x-1.1.7.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+limes_x-1.1.7.dist-info/entry_points.txt,sha256=P1UpWZ-q8GvFystMaHOUTH8844VaNMAOs1MX_R_KJXE,36
+limes_x-1.1.7.dist-info/top_level.txt,sha256=r9RGajCrNNSpim7JI2bx3UHGzgXw2vRLTNuxMRwPRNQ,8
+limes_x-1.1.7.dist-info/RECORD,,
```

