# Comparing `tmp/odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,17 +1,19 @@
-Zip file size: 9831 bytes, number of entries: 15
--rw-r--r--  2.0 unx      666 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/README.rst
--rw-r--r--  2.0 unx       23 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/__init__.py
--rw-r--r--  2.0 unx      484 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/__manifest__.py
--rw-r--r--  2.0 unx      341 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/i18n/shopinvader_sale_coupon.pot
--rw-r--r--  2.0 unx       70 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/services/__init__.py
--rw-r--r--  2.0 unx     2258 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/services/abstract_sale.py
--rw-r--r--  2.0 unx     3036 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/services/cart.py
--rw-r--r--  2.0 unx     1598 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/services/customer.py
--rw-r--r--  2.0 unx       24 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/tests/__init__.py
--rw-r--r--  2.0 unx     8403 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/tests/test_cart.py
--rw-r--r--  2.0 unx     4718 b- defN 22-Jan-31 17:04 odoo/addons/shopinvader_sale_coupon/tests/test_customer.py
--rw-r--r--  2.0 unx     1216 b- defN 22-Jan-31 17:04 odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Jan-31 17:04 odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Jan-31 17:04 odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1653 b- defN 22-Jan-31 17:04 odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/RECORD
-15 files, 24587 bytes uncompressed, 6937 bytes compressed:  71.8%
+Zip file size: 10885 bytes, number of entries: 17
+-rw-r--r--  2.0 unx      666 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/README.rst
+-rw-r--r--  2.0 unx       44 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/__init__.py
+-rw-r--r--  2.0 unx      484 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/__manifest__.py
+-rw-r--r--  2.0 unx     1165 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/i18n/shopinvader_sale_coupon.pot
+-rw-r--r--  2.0 unx       25 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/models/__init__.py
+-rw-r--r--  2.0 unx      501 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/models/sale_order.py
+-rw-r--r--  2.0 unx       70 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/services/__init__.py
+-rw-r--r--  2.0 unx     2329 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/services/abstract_sale.py
+-rw-r--r--  2.0 unx     3036 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/services/cart.py
+-rw-r--r--  2.0 unx     1598 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/services/customer.py
+-rw-r--r--  2.0 unx       24 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/tests/__init__.py
+-rw-r--r--  2.0 unx     9353 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/tests/test_cart.py
+-rw-r--r--  2.0 unx     4718 b- defN 22-Feb-22 17:39 odoo/addons/shopinvader_sale_coupon/tests/test_customer.py
+-rw-r--r--  2.0 unx     1216 b- defN 22-Feb-22 17:39 odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 22-Feb-22 17:39 odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 22-Feb-22 17:39 odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1875 b- defN 22-Feb-22 17:39 odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/RECORD
+17 files, 27201 bytes uncompressed, 7619 bytes compressed:  72.0%
```

## zipnote {}

```diff
@@ -6,14 +6,20 @@
 
 Filename: odoo/addons/shopinvader_sale_coupon/__manifest__.py
 Comment: 
 
 Filename: odoo/addons/shopinvader_sale_coupon/i18n/shopinvader_sale_coupon.pot
 Comment: 
 
+Filename: odoo/addons/shopinvader_sale_coupon/models/__init__.py
+Comment: 
+
+Filename: odoo/addons/shopinvader_sale_coupon/models/sale_order.py
+Comment: 
+
 Filename: odoo/addons/shopinvader_sale_coupon/services/__init__.py
 Comment: 
 
 Filename: odoo/addons/shopinvader_sale_coupon/services/abstract_sale.py
 Comment: 
 
 Filename: odoo/addons/shopinvader_sale_coupon/services/cart.py
@@ -27,20 +33,20 @@
 
 Filename: odoo/addons/shopinvader_sale_coupon/tests/test_cart.py
 Comment: 
 
 Filename: odoo/addons/shopinvader_sale_coupon/tests/test_customer.py
 Comment: 
 
-Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/METADATA
+Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/WHEEL
+Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/top_level.txt
+Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/RECORD
+Filename: odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/shopinvader_sale_coupon/__init__.py

```diff
@@ -1 +1,2 @@
+from . import models
 from . import services
```

## odoo/addons/shopinvader_sale_coupon/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2021 Camptocamp SA
 # @author Iv√°n Todorovich <ivan.todorovich@gmail.com>
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Shopvinvader Sale Coupon",
     "summary": "Manage Promotion and Coupon programs in Shopinvader",
-    "version": "14.0.1.1.0",
+    "version": "14.0.1.2.0",
     "category": "Sale",
     "website": "https://github.com/shopinvader/odoo-shopinvader",
     "author": "Camptocamp",
     "license": "AGPL-3",
     "depends": ["shopinvader", "sale_coupon"],
 }
```

## odoo/addons/shopinvader_sale_coupon/i18n/shopinvader_sale_coupon.pot

```diff
@@ -1,13 +1,39 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
+# 	* shopinvader_sale_coupon
 #
 msgid ""
 msgstr ""
 "Project-Id-Version: Odoo Server 14.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
+
+#. module: shopinvader_sale_coupon
+#: model:ir.model.fields,field_description:shopinvader_sale_coupon.field_sale_order__display_name
+msgid "Display Name"
+msgstr ""
+
+#. module: shopinvader_sale_coupon
+#: model:ir.model.fields,field_description:shopinvader_sale_coupon.field_sale_order__id
+msgid "ID"
+msgstr ""
+
+#. module: shopinvader_sale_coupon
+#: model:ir.model.fields,field_description:shopinvader_sale_coupon.field_sale_order____last_update
+msgid "Last Modified on"
+msgstr ""
+
+#. module: shopinvader_sale_coupon
+#: model:ir.model.fields,field_description:shopinvader_sale_coupon.field_sale_order__reward_amount_tax_incl
+msgid "Reward Amount Tax Incl"
+msgstr ""
+
+#. module: shopinvader_sale_coupon
+#: model:ir.model,name:shopinvader_sale_coupon.model_sale_order
+msgid "Sales Order"
+msgstr ""
```

## odoo/addons/shopinvader_sale_coupon/services/abstract_sale.py

```diff
@@ -13,14 +13,15 @@
 
     def _convert_one_sale(self, sale):
         res = super()._convert_one_sale(sale)
         res.update(
             {
                 "promo_code": sale.promo_code,
                 "reward_amount": sale.reward_amount,
+                "reward_amount_tax_incl": sale.reward_amount_tax_incl,
                 "applied_coupon_ids": self._convert_coupon(sale.applied_coupon_ids),
                 "generated_coupon_ids": self._convert_coupon(sale.generated_coupon_ids),
                 "no_code_promo_program_ids": self._convert_coupon_programs(
                     sale.no_code_promo_program_ids
                 ),
                 "code_promo_program_id": (
                     sale.code_promo_program_id.jsonify(
```

## odoo/addons/shopinvader_sale_coupon/tests/test_cart.py

```diff
@@ -198,14 +198,44 @@
         )
         self.assertEqual(
             generated_coupon["partner"]["id"],
             self.partner.id,
             "Coupons for next order should've been generated for this partner",
         )
 
+    def test_reward_amount(self):
+        self.service.dispatch(
+            "add_item",
+            params={
+                "product_id": self.product_A.id,
+                "item_qty": 1.0,
+            },
+        )
+        cart = self.service.dispatch(
+            "add_item",
+            params={
+                "product_id": self.product_B.id,
+                "item_qty": 2.0,
+            },
+        )
+        self.assertAlmostEqual(
+            cart["data"]["reward_amount"],
+            -self.product_B.taxes_id.compute_all(self.product_B.list_price)[
+                "total_excluded"
+            ],
+            2,
+            "Untaxed reward amount should be untaxed unit price of product B",
+        )
+        self.assertAlmostEqual(
+            cart["data"]["reward_amount_tax_incl"],
+            -self.product_B.list_price,
+            2,
+            "Tax included reward amount should be tax included unit price of product B",
+        )
+
     def test_manual_recompute(self):
         # Test case 1 (1 A 1 B): Assert that no reward is given because
         # we're skipping the recompute
         self.service.dispatch(
             "add_item",
             params={
                 "product_id": self.product_A.id,
```

## Comparing `odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/METADATA` & `odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-shopinvader-sale-coupon
-Version: 14.0.1.1.0
+Version: 14.0.1.2.0
 Summary: Manage Promotion and Coupon programs in Shopinvader
 Home-page: https://github.com/shopinvader/odoo-shopinvader
 Author: Camptocamp
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
```

## Comparing `odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/RECORD` & `odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/RECORD`

 * *Files 16% similar despite different names*

```diff
@@ -1,15 +1,17 @@
 odoo/addons/shopinvader_sale_coupon/README.rst,sha256=07lSt17iwpXqUnmy-wREQ_4QGLvxgCzswcyV6KuhEAc,666
-odoo/addons/shopinvader_sale_coupon/__init__.py,sha256=qksdRxAxHhEXpY0NZlTEolhxFILjRI5o7J0O4UrAE04,23
-odoo/addons/shopinvader_sale_coupon/__manifest__.py,sha256=DddIzAm_cHZY9T4ewfLVmkuZDtjZQ-5lKdv47XeslGA,484
-odoo/addons/shopinvader_sale_coupon/i18n/shopinvader_sale_coupon.pot,sha256=AyzPzY6fvZoAIdVCppv0SiPLoR_D-HBQlYffHd1jWNE,341
+odoo/addons/shopinvader_sale_coupon/__init__.py,sha256=iLIJMqyxPGaW4AYYX_MffqzP1KjldI_YrtyUvckOAbc,44
+odoo/addons/shopinvader_sale_coupon/__manifest__.py,sha256=UZLVgtwqh_ZgF4H9IQHwjeCw5mChT3VpIVJn73iqMUE,484
+odoo/addons/shopinvader_sale_coupon/i18n/shopinvader_sale_coupon.pot,sha256=3f__Q3Oku3SMtiUBHdyrq0CTEaOk8IsBcr3bQe30gyk,1165
+odoo/addons/shopinvader_sale_coupon/models/__init__.py,sha256=LsPoCIAYodIFzh85VEjY5GiuzDQDQpiF38txDw10qT0,25
+odoo/addons/shopinvader_sale_coupon/models/sale_order.py,sha256=DCI9GtUmxfPAYZuzEA3KHHt6eeUT_0p7-08ihFs7cxY,501
 odoo/addons/shopinvader_sale_coupon/services/__init__.py,sha256=U9FKtW7YlgEXsiUU8nr3eLAGaHLGNAYm_rGnKUUg_X8,70
-odoo/addons/shopinvader_sale_coupon/services/abstract_sale.py,sha256=lNKl9-yRCjrZ15dBHcc3XNEntLUj_5GS6JOrHs3D2HE,2258
+odoo/addons/shopinvader_sale_coupon/services/abstract_sale.py,sha256=8aTu-Amxog6o5LwkaLyy_F9r0Z1bSM8WTsmEmK2FPF8,2329
 odoo/addons/shopinvader_sale_coupon/services/cart.py,sha256=DUPHR8_MwfXFjA18eryjWmgYOHohK76RVUW5IBQByvA,3036
 odoo/addons/shopinvader_sale_coupon/services/customer.py,sha256=zPtrqWSqsFX5er76XDCPrZl8lPiY7J0Afh7iMYeUYec,1598
 odoo/addons/shopinvader_sale_coupon/tests/__init__.py,sha256=hOeBowbdIIBdiMr4P9L3bzW-FV9fNKaPhHo9fmEe8I0,24
-odoo/addons/shopinvader_sale_coupon/tests/test_cart.py,sha256=MIbrrtVl65Z93eKHBKvOUcw_fw0YhVWoBCP41bJET3Y,8403
+odoo/addons/shopinvader_sale_coupon/tests/test_cart.py,sha256=m0Rsi4Yhij14zjCjTB1ervy7lvW6jZirfPBEyrwkl4w,9353
 odoo/addons/shopinvader_sale_coupon/tests/test_customer.py,sha256=MmzyetJ_qafIcw5C7uZOeN5qep2Yz5sYhUq3GHoNqPY,4718
-odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/METADATA,sha256=WaY3_-LpD4oKYsEmrpgq-OlrSfbEMLbai4ZJQ-6H01Y,1216
-odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_shopinvader_sale_coupon-14.0.1.1.0.dist-info/RECORD,,
+odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/METADATA,sha256=eL191MITFPXYvXI6-eqjj3sOMTic3HHnrRh0w7ukbL8,1216
+odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_shopinvader_sale_coupon-14.0.1.2.0.dist-info/RECORD,,
```

